# 外包项目之礼仪成像系统（1）
## 任务编号
`task3`
## 任务目的
在实际的项目开发中，需要大家在短时间内掌握一种语言或算法并将其应用到项目开发中，这对我们的学习能力有着较高的要求。
本次考核是将工作室的实际项目进行拆分，分阶段发布。要求各位在短时间内学习全新的知识，并完成相应题目。进而考察和锻炼各位的学习能力。
## 任务说明
本次任务默认各位有一定的C/C++编程基础，并依此对内容及时间进行安排。在完成过程中，可百度可咨询，最终考核以结果为主。
默认开发平台为windows，并默认各位都使用笔记本有摄像头。
该礼仪成像系统的目的是开发一个系统，用来教小朋友文明礼仪。整个系统主要需要完成如下任务：实时捕捉摄像头的视频流，将视频流中的人的轮廓提取出来，并与模板图片（也需要进行轮廓提取）进行匹配，如果成功匹配则给出相应提示，反之亦然。
## 任务时间
2018-08-02 至 2018-08-19
__注： 起始时间为我们开始Review的时间，终止时间为Review的截止时间。__
## 任务要求
1. 要求所有参与考核的成员必须准时完成任务

2. 代码注释超过20%（至少每个函数需要注明输入参数、输出参数以及相关功能）

3. 编写[说明.md](https://github.com/IGGITechnology/2018Summer/blob/master/task1/%E8%AF%B4%E6%98%8E.md)文件（内容：注明开发平台，开发工具及版本，开发时间，作者姓名，书写与项目相关的说明文档，最后对本次任务进行总结）
## 任务内容
1. 学习OpenCV进行摄像头操作的函数，学习使用OpenCV打开视频流。

2. 学习总结绿幕模板(mask)抠图算法算法和图像轮廓提取（使用外部轮廓）算法，了解颜色空间(RGB,HSV等)。

3. 学习Qt多线程编程，特别是跨线程数据传递，本任务需要将视频流相关处理放在工作线程中，并将工作线程的结果返回主线程显示。

4. 学习Qt ini配置文件读写方式，本任务需要针对相关参数进行动态调试设置阈值（本次任务可选，下次任务必须做）。

5. 注意项目架构与分层。

## 任务作业
1. 在Qt5.x框架下创建Qt Widgets Application项目（是否创建ui文件，不做要求），项目名称为`task3`

2. 配置opencv3.x(VC14)开发环境

3. 设计界面，界面包含以下内容：
```
a. 两个图像显示控件（一个用于显示摄像头实时画面（预览区），一个用于显示模板图片（演示区））。
b. 计时器（用于对目标图片进行自动播放）。
c. 设计一个区域摆放两个button：开始与结束（控制区）；自定义button的图标，参考视频或音频播放器的开始与结束按钮（可选）。
```

*选做：Qt自带UI控件并不美观，各位可采用Qml自行定义相应控件。*
*界面设计各位自由发挥，力求简洁美观，符合大众审美。*

4、功能实现：
```
a. 在工作线程中实现：打开并显示视频的功能，如果视频大于窗口需要缩放（使用OpenCV）。
b.（工作线程）图像mask掩模算法，并将算法用于视频流处理（本任务由于其特殊性，并不需要进行抠图，只需要将mask制作出来即可），
提示：在HSV颜色空间中进行，具体为什么在HSV颜色空间，请学习并写入总结文档，mask掩模图像是二值图，即黑白图，非黑即白，只有0和1。
c.（工作线程）根据上步的mask进行轮廓计算，只找外部轮廓，并将轮廓绘制出来（轮廓图像，二值图）（有相应的OpenCV函数）
d.（工作线程->主线程）将绘制出来的轮廓图像传回主线程并在预览区显示。
e.（主线程）将模板图像显示在演示区。
f.（主线程）使用计时器实现模板图像的轮换显示，具体为，10s一轮换，总计6张循环显示，每次开始轮换前给出相应的开始提示。
g.（主线程）主窗口直接全屏显示，隐藏最小最大化以及关闭按钮。
h.（主线程）在控制区按钮实现如下功能，`开始`按钮开启摄像头并进入工作线程计算返回结果，`结束`按钮停止并清空工作线程，弹出是否退出的对话框，包含选项`是`与`否`，并完成相关操作。
```

5. 在你`Fork`后的自己的仓库中，到`task3`文件夹中添加一个子文件夹，文件夹的命名为你的`GitHub ID`，在该文件夹中上传项目文件，上传`说明.md`文件，创建子文件夹（名称为`截图`）上传程序运行截图：

```
➜  2018AutumnAnswers git:(master) ✗ tree
.
├── README.md
└── task3
    ├── CodeDaraW
    │   └── CodeDaraW.md
    ├── user1
    │   └── 说明.md
    │   └── 截图
    │   └── task3（项目文件）
    ├── user2
    │   └── 说明.md
    │   └── 截图
    │   └── task3（项目文件）

```
6. 接着推到自己的仓库后，向上游仓库（`IGGITechnology/2018Summer`）发起`PR`（即`Pull Request`，后续将全部使用`PR`来简写）。**`这两次都有发现有同学传错目录的，请各位pr前仔细核对`**。

我们在你的`PR`发起后，将会收到通知并在第一时间进行Review，符合要求的`PR`将会被接受，不符合要求的我们会按照情况在`PR`下面进行评论并指出问题。

## 参考资料
- [HSV颜色空间](https://blog.csdn.net/taily_duan/article/details/51506776)
- [HSV颜色分离](https://blog.csdn.net/pockyym/article/details/12203709)
- [OpenCV轮廓检测](https://blog.csdn.net/pockyym/article/details/12203875)
- [OpenCV颜色空间转换](https://blog.csdn.net/gxiaob/article/details/8799242)
- [OpenCV绿幕抠图1](https://blog.csdn.net/chenxun_2010/article/details/38402951)
- [OpenCV绿幕抠图2](https://blog.csdn.net/chenxun_2010/article/details/38407903)
